{"version":3,"sources":["../src/store.tsx","../src/ScissorCanvas.tsx","../src/hooks/useCombinedRefs.ts","../src/ScissorWindow.tsx","../src/ScissorScene.tsx","utils/Helpers.jsx","Models.tsx","../src/hooks/useScissorFrame.ts","../src/hooks/useScissorInit.ts","useMesh.tsx","App.tsx","index.tsx"],"names":["create","set","get","windows","addWindow","window","id","uuid","THREE","generateUUID","produce","state","element","removeWindow","addScene","scene","camera","rect","getBoundingClientRect","width","height","hasInit","removeScene","sethasInit","getIds","Object","keys","frameSubscribers","addSubscriber","cb","length","forEach","k","removeSubscriber","initSubscribers","addInitSubscriber","removeInitSubscriber","ScissorRenderer","store","s","useFrame","gl","key","setClearColor","setScissorTest","clear","add","left","right","top","bottom","domElement","clientHeight","clientWidth","positiveYUpBottom","setScissor","setViewport","aspect","updateProjectionMatrix","render","ScissorCanvas","forwardRef","props","ref","style","position","display","zIndex","children","useCombinedRefs","refs","targetRef","React","useRef","useEffect","current","ScissorWindow","rest","localRef","combinedRef","_uuid","ScissorScene","Helpers","args","Model","meshes","orbit","useScissorFrame","update","useScissorInit","genericCamera","lookAt","OrbitControls","bBox","setFromObject","size","getSize","dist","y","Math","tan","fov","PI","pos","setScalar","multiplyScalar","map","m","i","attach","scale","degToRad","Center","castShadow","geometry","vertexColors","intensity","receiveShadow","color","useGLTF","preload","ghPagesBaseURl","softShadows","container","hidden","transition","staggerChildren","show","item","Cells","limit","nodes","useMemo","values","filter","o","isMesh","splice","useMesh","antialias","shadows","fallback","AnimatePresence","motion","div","className","variants","initial","animate","exit","parent","name","process","useState","nMesh","setNMeshes","nMeshFinal","setNMeshesFinal","autoHide","autoHideTimeout","autoHideDuration","href","min","max","onAfterChange","v","onChange","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.cb95fce7.chunk.js","sourcesContent":["import create from \"zustand\";\nimport produce from \"immer\";\nimport * as THREE from \"three\";\nimport { iScissorWindow, tScissorCallback } from \"./ScissorTypes\";\n\ninterface iScissorRootState {\n  windows: {\n    [key: string]: iScissorWindow;\n  };\n  frameSubscribers: {\n    [key: string]: tScissorCallback;\n  };\n  initSubscribers: {\n    [key: string]: tScissorCallback;\n  };\n  addWindow: (window: HTMLElement, id?: string | undefined) => string;\n  removeWindow: (id: string) => any;\n  addScene: (\n    scene: THREE.Scene,\n    id: string,\n    camera?: THREE.Camera | undefined\n  ) => any;\n  removeScene: (id: string) => any;\n  sethasInit: (hasInit: boolean, id: string) => any;\n  getIds: () => string[];\n  addSubscriber: (cb: tScissorCallback, uuid: string[]) => any;\n  removeSubscriber: (uuid: string[]) => any;\n  addInitSubscriber: (cb: tScissorCallback, uuid: string[]) => any;\n  removeInitSubscriber: (uuid: string[]) => any;\n}\n\nexport default create<iScissorRootState>((set: any, get: any) => ({\n  windows: {},\n  addWindow: (window: HTMLElement, id?: string) => {\n    const uuid = id ?? THREE.MathUtils.generateUUID();\n    set(\n      produce((state: iScissorRootState) => {\n        state.windows[uuid] = {\n          element: window,\n        };\n      })\n    );\n\n    return uuid;\n  },\n  removeWindow: (id: string) =>\n    set(\n      produce((state: iScissorRootState) => {\n        delete state.windows[id];\n      })\n    ),\n\n  addScene: (scene: THREE.Scene, id: string, camera?: THREE.Camera) =>\n    set(\n      produce((state: iScissorRootState) => {\n        if (state.windows[id]) {\n          const elem = state.windows[id].element;\n          const rect = elem.getBoundingClientRect();\n          state.windows[id].scene = scene;\n          state.windows[id].camera =\n            camera ??\n            new THREE.PerspectiveCamera(\n              75,\n              rect.width / rect.height,\n              0.1,\n              1000\n            );\n          state.windows[id].hasInit = false;\n        }\n      })\n    ),\n\n  removeScene: (id: string) => get().removeWindow(id),\n\n  sethasInit: (hasInit: boolean, id: string) =>\n    set(\n      produce((state: iScissorRootState) => {\n        state.windows[id].hasInit = hasInit;\n      })\n    ),\n\n  getIds: () => Object.keys((get() as iScissorRootState).windows),\n\n  frameSubscribers: {},\n  addSubscriber: (cb: tScissorCallback, uuid: string[]) =>\n    set(\n      produce((state: iScissorRootState) => {\n        if (uuid.length > 0) {\n          uuid.forEach((id) => (state.frameSubscribers[id] = cb));\n        } else {\n          Object.keys(state.windows).forEach(\n            (k) => (state.frameSubscribers[k] = cb)\n          );\n        }\n      })\n    ),\n  removeSubscriber: (uuid: string[]) =>\n    set(\n      produce((state: iScissorRootState) => {\n        if (uuid.length > 0) {\n          uuid.forEach((id) => delete state.frameSubscribers[id]);\n        } else {\n          state.frameSubscribers = {};\n        }\n      })\n    ),\n\n  initSubscribers: {},\n  addInitSubscriber: (cb: tScissorCallback, uuid: string[]) =>\n    set(\n      produce((state: iScissorRootState) => {\n        if (uuid.length > 0) {\n          uuid.forEach((id) => (state.initSubscribers[id] = cb));\n        } else {\n          Object.keys(state.windows).forEach(\n            (k) => (state.initSubscribers[k] = cb)\n          );\n        }\n      })\n    ),\n  removeInitSubscriber: (uuid: string[]) =>\n    set(\n      produce((state: iScissorRootState) => {\n        if (uuid.length > 0) {\n          uuid.forEach((id) => delete state.initSubscribers[id]);\n        } else {\n          state.initSubscribers = {};\n        }\n      })\n    ),\n}));\n","import { Canvas, Props, useFrame } from \"@react-three/fiber\";\nimport React, { forwardRef } from \"react\";\nimport store from \"./store\";\n\nimport { iScissorWindow, tScissorCallback } from \"./ScissorTypes\";\n\nfunction ScissorRenderer() {\n  const windows = store((s) => s.windows) as { [key: string]: iScissorWindow };\n  const frameSubscribers = store((s) => s.frameSubscribers) as {\n    [key: string]: tScissorCallback;\n  };\n  const initSubscribers = store((s) => s.initSubscribers) as {\n    [key: string]: tScissorCallback;\n  };\n  const sethasInit = store((s) => s.sethasInit);\n\n  useFrame((state) => {\n    const { gl } = state;\n    gl.setClearColor(0xffffff, 0);\n    gl.setScissorTest(false);\n    gl.clear(true, true);\n    gl.setScissorTest(true);\n\n    // const transform = `translateY(${window.scrollY}px)`;\n    // if (gl.domElement.parentElement)\n    //   gl.domElement.parentElement.style.transform = transform;\n\n    for (const key in windows) {\n      const { scene, element, camera, hasInit } = windows[key];\n\n      if (scene && camera) {\n        if (!hasInit) {\n          if (initSubscribers[key])\n            initSubscribers[key]({\n              scene,\n              camera,\n              element,\n            });\n          scene.add(camera);\n          sethasInit(true, key);\n        }\n\n        const rect = element.getBoundingClientRect();\n        const { left, right, top, bottom, width, height } = rect;\n\n        const isOffscreen =\n          bottom < 0 ||\n          top > gl.domElement.clientHeight ||\n          right < 0 ||\n          left > gl.domElement.clientWidth;\n\n        if (!isOffscreen) {\n          const positiveYUpBottom = gl.domElement.clientHeight - bottom;\n          gl.setScissor(left, positiveYUpBottom, width, height);\n          gl.setViewport(left, positiveYUpBottom, width, height);\n\n          // @ts-ignore\n          camera.aspect = rect.width / rect.height;\n          // @ts-ignore\n          camera.updateProjectionMatrix();\n\n          if (frameSubscribers[key])\n            frameSubscribers[key]({\n              scene,\n              camera,\n              element,\n            });\n\n          gl.render(scene, camera);\n        }\n      }\n    }\n  }, 1);\n\n  return <></>;\n}\n\nconst ScissorCanvas = forwardRef<\n  HTMLCanvasElement,\n  React.PropsWithChildren<Props>\n>((props, ref) => {\n  return (\n    <Canvas\n      ref={ref}\n      style={{\n        position: \"fixed\",\n        left: \"0\",\n        top: \"0\",\n        width: \"100%\",\n        height: \"100%\",\n        display: \"block\",\n        zIndex: -1,\n      }}\n      {...props}\n    >\n      <ScissorRenderer />\n      {props.children}\n    </Canvas>\n  );\n});\n\nexport default ScissorCanvas;\n","import React from \"react\";\n\nexport default function useCombinedRefs<T>(...refs: any[]) {\n  const targetRef = React.useRef<T>(null);\n\n  React.useEffect(() => {\n    refs.forEach((ref) => {\n      if (!ref) return;\n      ref.current = targetRef.current;\n    });\n  }, [refs]);\n\n  return targetRef;\n}\n","import React, { forwardRef, useEffect, useRef } from \"react\";\nimport store from \"./store\";\nimport useCombinedRefs from \"./hooks/useCombinedRefs\";\n\ninterface iScissorWindowProps {\n  uuid?: string;\n}\n\nconst ScissorWindow = forwardRef<\n  HTMLDivElement,\n  React.PropsWithChildren<iScissorWindowProps & React.HTMLProps<HTMLDivElement>>\n>(({ uuid, children, ...rest }, ref) => {\n  const addWindow = store((s) => s.addWindow);\n  const removeWindow = store((s) => s.removeWindow);\n  const localRef = useRef();\n  const combinedRef = useCombinedRefs<HTMLDivElement>(ref, localRef);\n\n  useEffect(() => {\n    if (localRef.current) {\n      const _uuid = addWindow(localRef.current, uuid);\n      return () => removeWindow(_uuid);\n    } else {\n      return;\n    }\n  }, [localRef]);\n\n  return (\n    <div {...rest} ref={combinedRef}>\n      {children}\n    </div>\n  );\n});\n\nexport default ScissorWindow;\n","import React, { forwardRef, useEffect, useRef } from \"react\";\nimport store from \"./store\";\nimport useCombinedRefs from \"./hooks/useCombinedRefs\";\n\ninterface iScissorGroupProps {\n  uuid: string;\n}\n\nconst ScissorScene = forwardRef<\n  THREE.Scene,\n  React.PropsWithChildren<iScissorGroupProps>\n>(({ uuid, children, ...rest }, ref) => {\n  const addScene = store((s) => s.addScene);\n  const removeScene = store((s) => s.removeScene);\n  const localRef = useRef<THREE.Scene>();\n  const combinedRef = useCombinedRefs<THREE.Scene>(ref, localRef);\n\n  useEffect(() => {\n    if (localRef.current) {\n      addScene(localRef.current, uuid);\n      return () => removeScene(uuid);\n    } else {\n      return;\n    }\n  }, [localRef]);\n\n  return (\n    <scene {...rest} ref={combinedRef}>\n      {children}\n    </scene>\n  );\n});\n\nexport default ScissorScene;\n","export default function Helpers() {\n  return (\n    <group>\n      <axesHelper args={[10, 10]} />\n      <gridHelper />\n    </group>\n  )\n}\n","/*\nAuto-generated by: https://github.com/pmndrs/gltfjsx\n*/\n\nimport { useRef } from \"react\";\nimport { useGLTF, Center, Plane } from \"@react-three/drei\";\n\nimport * as THREE from \"three\";\nimport { ScissorScene, useScissorFrame, useScissorInit } from \"../src\";\n\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\nimport Helpers from \"./utils/Helpers\";\n\nexport default function Model({ meshes }: { meshes: THREE.Mesh[] }) {\n  const orbit = useRef<OrbitControls>();\n  useScissorFrame(() => {\n    if (orbit.current) {\n      orbit.current.update();\n    }\n  }, []);\n\n  useScissorInit(({ camera: genericCamera, element, scene }) => {\n    const camera = genericCamera as THREE.PerspectiveCamera;\n\n    camera.position.set(2, 2, 2);\n    camera.lookAt(0, 0, 0);\n    orbit.current = new OrbitControls(camera, element);\n\n    const bBox = new THREE.Box3().setFromObject(scene);\n    const size = new THREE.Vector3();\n    bBox.getSize(size);\n    const height = size.y;\n    const dist = height / (2 * Math.tan((camera.fov * Math.PI) / 360));\n    const pos = scene.position;\n\n    const fac = 1.5;\n    camera.position.setScalar(dist).multiplyScalar(fac);\n    camera.lookAt(pos);\n  }, []);\n\n  return (\n    <>\n      {meshes.map((m, i) => {\n        return (\n          <ScissorScene uuid={`${i}`} key={i}>\n            <color\n              attach=\"background\"\n              args={[new THREE.Color('#f9f5f2')]}\n            />\n            <group scale={0.1} rotation-x={THREE.MathUtils.degToRad(90)}>\n              <Center>\n                <mesh castShadow geometry={m.geometry}>\n                  <meshBasicMaterial vertexColors />\n                </mesh>\n              </Center>\n            </group>\n\n            <ambientLight intensity={0.2} />\n            <directionalLight\n              castShadow\n              receiveShadow\n              position={[0, 10, 0]}\n              intensity={0.5}\n              shadow-mapSize-height={512}\n              shadow-mapSize-width={512}\n            />\n\n            <Plane\n              receiveShadow\n              rotation-x={THREE.MathUtils.degToRad(-90)}\n              scale={20}\n            >\n              <shadowMaterial color={\"#fef5ed\"} />\n            </Plane>\n\n            <Helpers />\n          </ScissorScene>\n        );\n      })}\n    </>\n  );\n}\n\nuseGLTF.preload(\"/models/mesh.glb\");\n","import { useEffect } from \"react\";\nimport store from \"../store\";\n\nimport { tScissorCallback } from \"../ScissorTypes\";\n\nexport default function useScissorFrame(cb: tScissorCallback, uuid: string[]) {\n  const windows = store((s) => s.windows);\n\n  const addSubscriber = store((s) => s.addSubscriber);\n  const removeSubscriber = store((s) => s.removeSubscriber);\n\n  useEffect(() => {\n    addSubscriber(cb, uuid);\n    return () => removeSubscriber(uuid);\n  }, [windows]);\n}\n","import { useEffect } from \"react\";\nimport store from \"../store\";\n\nimport { tScissorCallback } from \"../ScissorTypes\";\n\nexport default function useScissorInit(cb: tScissorCallback, uuid: string[]) {\n  const windows = store((s) => s.windows);\n  const addInitSubscriber = store((s) => s.addInitSubscriber);\n  const removeInitSubscriber = store((s) => s.removeInitSubscriber);\n\n  useEffect(() => {\n    addInitSubscriber(cb, uuid);\n    return () => removeInitSubscriber(uuid);\n  }, [windows]);\n}\n","import { useGLTF } from \"@react-three/drei\";\nimport { useMemo } from \"react\";\n\nconst ghPagesBaseURl =\n  process.env.NODE_ENV === \"development\"\n    ? \"/\"\n    : \"https://farazzshaikh.github.io/react-three-scissor/\";\n\nexport default function useMesh({ limit }: { limit: number }) {\n  // @ts-ignore\n  const { nodes } = useGLTF(`${ghPagesBaseURl}models/mesh.glb`);\n\n  const meshes: THREE.Mesh[] = useMemo(\n    () =>\n      Object.values(nodes)\n        .filter((o: any) => o.isMesh)\n        .splice(0, limit) as any,\n    [limit, nodes]\n  );\n\n  return meshes;\n}\n\nuseGLTF.preload(`${ghPagesBaseURl}models/mesh.glb`);\n","import { Suspense, useState } from \"react\";\nimport { hot } from \"react-hot-loader\";\n\nimport { ScissorCanvas, ScissorWindow } from \"../src/index\";\nimport Model from \"./Models\";\nimport { softShadows } from \"@react-three/drei\";\nimport Slider from \"rc-slider\";\nimport \"rc-slider/assets/index.css\";\nimport useMesh from \"./useMesh\";\nimport GitHubButton from \"react-github-btn\";\n//@ts-ignore\nimport { Scrollbars } from \"react-custom-scrollbars\";\n//@ts-ignore\nimport { AnimatePresence, motion } from \"framer-motion/dist/es/index\";\n\nsoftShadows();\n\nconst container = {\n  hidden: {\n    scale: 0,\n    transition: {\n      staggerChildren: 10,\n    },\n  },\n  show: {\n    scale: 1,\n    transition: {\n      staggerChildren: 10,\n    },\n  },\n};\n\nconst item = {\n  hidden: { scale: 0 },\n  show: { scale: 1 },\n};\n\nfunction Cells({ limit }: { limit: number }) {\n  const meshes = useMesh({ limit });\n\n  return (\n    <>\n      <ScissorCanvas\n        gl={{\n          antialias: true,\n        }}\n        shadows\n      >\n        <Suspense fallback={null}>\n          <Model meshes={meshes} />\n        </Suspense>\n      </ScissorCanvas>\n\n      <AnimatePresence>\n        <motion.div\n          className=\"container\"\n          variants={container}\n          initial=\"hidden\"\n          animate=\"show\"\n          exit=\"hidden\"\n        >\n          {meshes.map((m, i) => (\n            <motion.div key={i} variants={item}>\n              <ScissorWindow className=\"cell\" uuid={`${i}`}>\n                <div className=\"ScissorWindow-container\">\n                  <p>{m?.parent?.name || `Model ${i + 1}`}</p>\n                </div>\n              </ScissorWindow>\n            </motion.div>\n          ))}\n        </motion.div>\n      </AnimatePresence>\n    </>\n  );\n}\n\nfunction App() {\n  const [nMesh, setNMeshes] = useState(1);\n  const [nMeshFinal, setNMeshesFinal] = useState(1);\n\n  return (\n    <Scrollbars\n      autoHide //\n      autoHideTimeout={1000}\n      autoHideDuration={200}\n    >\n      <p className=\"title-container\">\n        react-three-<div className=\"title\">Scissor</div>\n      </p>\n\n      <div className=\"github-btn \">\n        <GitHubButton\n          href=\"https://github.com/farazzshaikh/react-three-scissor\"\n          data-color-scheme=\"no-preference: light; light: light; dark: dark;\"\n          data-size=\"large\"\n          aria-label=\"Star farazzshaikh/react-three-scissor on GitHub\"\n        >\n          Star\n        </GitHubButton>\n      </div>\n\n      <div className=\"input\">\n        <span>\n          <Slider\n            min={1}\n            max={100}\n            onAfterChange={(v) => setNMeshesFinal(v)}\n            onChange={(v) => setNMeshes(v)}\n          />\n          <div>\n            {nMesh} mesh{nMesh > 1 ? \"s\" : \"\"}\n          </div>\n        </span>\n      </div>\n\n      <h3>Click + drag on each animal!</h3>\n      <Suspense fallback={null}>\n        <Cells limit={nMeshFinal} />\n      </Suspense>\n    </Scrollbars>\n  );\n}\n\nexport default process.env.NODE_ENV === \"development\" ? hot(module)(App) : App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}