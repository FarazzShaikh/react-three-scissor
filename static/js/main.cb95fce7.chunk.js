(this["webpackJsonpreact-three-scissor"]=this["webpackJsonpreact-three-scissor"]||[]).push([[0],{181:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),i=n(22),s=n.n(i),a=(n(89),n(16)),o=n(10),u=n(34),d=n(51),l=n.n(d),b=n(29),h=n(3),f=l()((function(e,t){return{windows:{},addWindow:function(t,n){var r=null!==n&&void 0!==n?n:h.MathUtils.generateUUID();return e(Object(b.a)((function(e){e.windows[r]={element:t}}))),r},removeWindow:function(t){return e(Object(b.a)((function(e){delete e.windows[t]})))},addScene:function(t,n,r){return e(Object(b.a)((function(e){if(e.windows[n]){var c=e.windows[n].element.getBoundingClientRect();e.windows[n].scene=t,e.windows[n].camera=null!==r&&void 0!==r?r:new h.PerspectiveCamera(75,c.width/c.height,.1,1e3),e.windows[n].hasInit=!1}})))},removeScene:function(e){return t().removeWindow(e)},sethasInit:function(t,n){return e(Object(b.a)((function(e){e.windows[n].hasInit=t})))},getIds:function(){return Object.keys(t().windows)},frameSubscribers:{},addSubscriber:function(t,n){return e(Object(b.a)((function(e){n.length>0?n.forEach((function(n){return e.frameSubscribers[n]=t})):Object.keys(e.windows).forEach((function(n){return e.frameSubscribers[n]=t}))})))},removeSubscriber:function(t){return e(Object(b.a)((function(e){t.length>0?t.forEach((function(t){return delete e.frameSubscribers[t]})):e.frameSubscribers={}})))},initSubscribers:{},addInitSubscriber:function(t,n){return e(Object(b.a)((function(e){n.length>0?n.forEach((function(n){return e.initSubscribers[n]=t})):Object.keys(e.windows).forEach((function(n){return e.initSubscribers[n]=t}))})))},removeInitSubscriber:function(t){return e(Object(b.a)((function(e){t.length>0?t.forEach((function(t){return delete e.initSubscribers[t]})):e.initSubscribers={}})))}}})),j=n(9);function O(){var e=f((function(e){return e.windows})),t=f((function(e){return e.frameSubscribers})),n=f((function(e){return e.initSubscribers})),r=f((function(e){return e.sethasInit}));return Object(u.b)((function(c){var i=c.gl;for(var s in i.setClearColor(16777215,0),i.setScissorTest(!1),i.clear(!0,!0),i.setScissorTest(!0),e){var a=e[s],o=a.scene,u=a.element,d=a.camera,l=a.hasInit;if(o&&d){l||(n[s]&&n[s]({scene:o,camera:d,element:u}),o.add(d),r(!0,s));var b=u.getBoundingClientRect(),h=b.left,f=b.right,j=b.top,O=b.bottom,m=b.width,w=b.height;if(!(O<0||j>i.domElement.clientHeight||f<0||h>i.domElement.clientWidth)){var v=i.domElement.clientHeight-O;i.setScissor(h,v,m,w),i.setViewport(h,v,m,w),d.aspect=b.width/b.height,d.updateProjectionMatrix(),t[s]&&t[s]({scene:o,camera:d,element:u}),i.render(o,d)}}}}),1),Object(j.jsx)(j.Fragment,{})}var m=Object(r.forwardRef)((function(e,t){return Object(j.jsxs)(u.a,Object(o.a)(Object(o.a)({ref:t,style:{position:"fixed",left:"0",top:"0",width:"100%",height:"100%",display:"block",zIndex:-1}},e),{},{children:[Object(j.jsx)(O,{}),e.children]}))})),w=n(18);function v(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=c.a.useRef(null);return c.a.useEffect((function(){t.forEach((function(e){e&&(e.current=r.current)}))}),[t]),r}var g=["uuid","children"],x=Object(r.forwardRef)((function(e,t){var n=e.uuid,c=e.children,i=Object(w.a)(e,g),s=f((function(e){return e.addWindow})),a=f((function(e){return e.removeWindow})),u=Object(r.useRef)(),d=v(t,u);return Object(r.useEffect)((function(){if(u.current){var e=s(u.current,n);return function(){return a(e)}}}),[u]),Object(j.jsx)("div",Object(o.a)(Object(o.a)({},i),{},{ref:d,children:c}))})),S=["uuid","children"],p=Object(r.forwardRef)((function(e,t){var n=e.uuid,c=e.children,i=Object(w.a)(e,S),s=f((function(e){return e.addScene})),a=f((function(e){return e.removeScene})),u=Object(r.useRef)(),d=v(t,u);return Object(r.useEffect)((function(){return u.current?(s(u.current,n),function(){return a(n)}):void 0}),[u]),Object(j.jsx)("scene",Object(o.a)(Object(o.a)({},i),{},{ref:d,children:c}))}));var k=n(186),E=n(187),I=n(190),y=n(78);function C(){return Object(j.jsxs)("group",{children:[Object(j.jsx)("axesHelper",{args:[10,10]}),Object(j.jsx)("gridHelper",{})]})}function M(e){var t=e.meshes,n=Object(r.useRef)();return function(e,t){var n=f((function(e){return e.windows})),c=f((function(e){return e.addSubscriber})),i=f((function(e){return e.removeSubscriber}));Object(r.useEffect)((function(){return c(e,t),function(){return i(t)}}),[n])}((function(){n.current&&n.current.update()}),[]),function(e,t){var n=f((function(e){return e.windows})),c=f((function(e){return e.addInitSubscriber})),i=f((function(e){return e.removeInitSubscriber}));Object(r.useEffect)((function(){return c(e,t),function(){return i(t)}}),[n])}((function(e){var t=e.camera,r=e.element,c=e.scene,i=t;i.position.set(2,2,2),i.lookAt(0,0,0),n.current=new y.a(i,r);var s=(new h.Box3).setFromObject(c),a=new h.Vector3;s.getSize(a);var o=a.y/(2*Math.tan(i.fov*Math.PI/360)),u=c.position;i.position.setScalar(o).multiplyScalar(1.5),i.lookAt(u)}),[]),Object(j.jsx)(j.Fragment,{children:t.map((function(e,t){return Object(j.jsxs)(p,{uuid:"".concat(t),children:[Object(j.jsx)("color",{attach:"background",args:[new h.Color("#f9f5f2")]}),Object(j.jsx)("group",{scale:.1,"rotation-x":h.MathUtils.degToRad(90),children:Object(j.jsx)(k.a,{children:Object(j.jsx)("mesh",{castShadow:!0,geometry:e.geometry,children:Object(j.jsx)("meshBasicMaterial",{vertexColors:!0})})})}),Object(j.jsx)("ambientLight",{intensity:.2}),Object(j.jsx)("directionalLight",{castShadow:!0,receiveShadow:!0,position:[0,10,0],intensity:.5,"shadow-mapSize-height":512,"shadow-mapSize-width":512}),Object(j.jsx)(E.a,{receiveShadow:!0,"rotation-x":h.MathUtils.degToRad(-90),scale:20,children:Object(j.jsx)("shadowMaterial",{color:"#fef5ed"})}),Object(j.jsx)(C,{})]},t)}))})}I.a.preload("/models/mesh.glb");var z=n(188),R=n(85),H=(n(160),"https://farazzshaikh.github.io/react-three-scissor/");I.a.preload("".concat(H,"models/mesh.glb"));var N=n(83),W=n(84),B=n(191),T=n(189);Object(z.a)();var U={hidden:{scale:0,transition:{staggerChildren:10}},show:{scale:1,transition:{staggerChildren:10}}},A={hidden:{scale:0},show:{scale:1}};function F(e){var t=function(e){var t=e.limit,n=Object(I.a)("".concat(H,"models/mesh.glb")).nodes;return Object(r.useMemo)((function(){return Object.values(n).filter((function(e){return e.isMesh})).splice(0,t)}),[t,n])}({limit:e.limit});return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(m,{gl:{antialias:!0},shadows:!0,children:Object(j.jsx)(r.Suspense,{fallback:null,children:Object(j.jsx)(M,{meshes:t})})}),Object(j.jsx)(B.a,{children:Object(j.jsx)(T.a.div,{className:"container",variants:U,initial:"hidden",animate:"show",exit:"hidden",children:t.map((function(e,t){var n;return Object(j.jsx)(T.a.div,{variants:A,children:Object(j.jsx)(x,{className:"cell",uuid:"".concat(t),children:Object(j.jsx)("div",{className:"ScissorWindow-container",children:Object(j.jsx)("p",{children:(null===e||void 0===e||null===(n=e.parent)||void 0===n?void 0:n.name)||"Model ".concat(t+1)})})})},t)}))})})]})}var P=function(){var e=Object(r.useState)(1),t=Object(a.a)(e,2),n=t[0],c=t[1],i=Object(r.useState)(1),s=Object(a.a)(i,2),o=s[0],u=s[1];return Object(j.jsxs)(W.Scrollbars,{autoHide:!0,autoHideTimeout:1e3,autoHideDuration:200,children:[Object(j.jsxs)("p",{className:"title-container",children:["react-three-",Object(j.jsx)("div",{className:"title",children:"Scissor"})]}),Object(j.jsx)("div",{className:"github-btn ",children:Object(j.jsx)(N.a,{href:"https://github.com/farazzshaikh/react-three-scissor","data-color-scheme":"no-preference: light; light: light; dark: dark;","data-size":"large","aria-label":"Star farazzshaikh/react-three-scissor on GitHub",children:"Star"})}),Object(j.jsx)("div",{className:"input",children:Object(j.jsxs)("span",{children:[Object(j.jsx)(R.a,{min:1,max:100,onAfterChange:function(e){return u(e)},onChange:function(e){return c(e)}}),Object(j.jsxs)("div",{children:[n," mesh",n>1?"s":""]})]})}),Object(j.jsx)("h3",{children:"Click + drag on each animal!"}),Object(j.jsx)(r.Suspense,{fallback:null,children:Object(j.jsx)(F,{limit:o})})]})};s.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(P,{})}),document.getElementById("root"))},89:function(e,t,n){}},[[181,1,2]]]);
//# sourceMappingURL=main.cb95fce7.chunk.js.map