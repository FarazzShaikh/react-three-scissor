(this["webpackJsonpreact-three-scissor"]=this["webpackJsonpreact-three-scissor"]||[]).push([[0],{181:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),c=n(22),s=n.n(c),a=(n(89),n(16)),o=n(10),u=n(34),d=n(51),l=n.n(d),b=n(29),f=n(3),h=l()((function(e,t){return{windows:{},addWindow:function(t,n){var r=null!==n&&void 0!==n?n:f.MathUtils.generateUUID();return e(Object(b.a)((function(e){e.windows[r]={element:t}}))),r},removeWindow:function(t){return e(Object(b.a)((function(e){delete e.windows[t]})))},addScene:function(t,n,r){return e(Object(b.a)((function(e){if(e.windows[n]){var i=e.windows[n].element.getBoundingClientRect();e.windows[n].scene=t,e.windows[n].camera=null!==r&&void 0!==r?r:new f.PerspectiveCamera(75,i.width/i.height,.1,1e3),e.windows[n].hasInit=!1}})))},removeScene:function(e){return t().removeWindow(e)},sethasInit:function(t,n){return e(Object(b.a)((function(e){e.windows[n].hasInit=t})))},getIds:function(){return Object.keys(t().windows)},frameSubscribers:{},addSubscriber:function(t,n){return e(Object(b.a)((function(e){n.length>0?n.forEach((function(n){return e.frameSubscribers[n]=t})):Object.keys(e.windows).forEach((function(n){return e.frameSubscribers[n]=t}))})))},removeSubscriber:function(t){return e(Object(b.a)((function(e){t.length>0?t.forEach((function(t){return delete e.frameSubscribers[t]})):e.frameSubscribers={}})))},initSubscribers:{},addInitSubscriber:function(t,n){return e(Object(b.a)((function(e){n.length>0?n.forEach((function(n){return e.initSubscribers[n]=t})):Object.keys(e.windows).forEach((function(n){return e.initSubscribers[n]=t}))})))},removeInitSubscriber:function(t){return e(Object(b.a)((function(e){t.length>0?t.forEach((function(t){return delete e.initSubscribers[t]})):e.initSubscribers={}})))}}})),j=n(9);function O(){var e=h((function(e){return e.windows})),t=h((function(e){return e.frameSubscribers})),n=h((function(e){return e.initSubscribers})),r=h((function(e){return e.sethasInit}));return Object(u.b)((function(i){var c=i.gl;for(var s in c.setScissorTest(!1),c.clear(!0,!0),c.setScissorTest(!0),e){var a=e[s],o=a.scene,u=a.element,d=a.camera,l=a.hasInit;if(o&&d){l||(n[s]&&n[s]({scene:o,camera:d,element:u}),o.add(d),r(!0,s));var b=u.getBoundingClientRect(),f=b.left,h=b.right,j=b.top,O=b.bottom,m=b.width,w=b.height;if(!(O<0||j>c.domElement.clientHeight||h<0||f>c.domElement.clientWidth)){var v=c.domElement.clientHeight-O;c.setScissor(f,v,m,w),c.setViewport(f,v,m,w),d.aspect=b.width/b.height,d.updateProjectionMatrix(),t[s]&&t[s]({scene:o,camera:d,element:u}),c.render(o,d)}}}}),1),Object(j.jsx)(j.Fragment,{})}var m=Object(r.forwardRef)((function(e,t){return Object(j.jsxs)(u.a,Object(o.a)(Object(o.a)({ref:t,style:{position:"fixed",left:"0",top:"0",width:"100%",height:"100%",display:"block",zIndex:-1}},e),{},{children:[Object(j.jsx)(O,{}),e.children]}))})),w=n(18);function v(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=i.a.useRef(null);return i.a.useEffect((function(){t.forEach((function(e){e&&(e.current=r.current)}))}),[t]),r}var x=["uuid","children"],g=Object(r.forwardRef)((function(e,t){var n=e.uuid,i=e.children,c=Object(w.a)(e,x),s=h((function(e){return e.addWindow})),a=h((function(e){return e.removeWindow})),u=Object(r.useRef)(),d=v(t,u);return Object(r.useEffect)((function(){if(u.current){var e=s(u.current,n);return function(){return a(e)}}}),[u]),Object(j.jsx)("div",Object(o.a)(Object(o.a)({},c),{},{ref:d,children:i}))})),S=["uuid","children"],p=Object(r.forwardRef)((function(e,t){var n=e.uuid,i=e.children,c=Object(w.a)(e,S),s=h((function(e){return e.addScene})),a=h((function(e){return e.removeScene})),u=Object(r.useRef)(),d=v(t,u);return Object(r.useEffect)((function(){return u.current?(s(u.current,n),function(){return a(n)}):void 0}),[u]),Object(j.jsx)("scene",Object(o.a)(Object(o.a)({},c),{},{ref:d,children:i}))}));var E=n(186),k=n(187),I=n(190),y=n(78);function M(){return Object(j.jsxs)("group",{children:[Object(j.jsx)("axesHelper",{args:[10,10]}),Object(j.jsx)("gridHelper",{})]})}function R(e){var t=e.meshes,n=Object(r.useRef)();return function(e,t){var n=h((function(e){return e.windows})),i=h((function(e){return e.addSubscriber})),c=h((function(e){return e.removeSubscriber}));Object(r.useEffect)((function(){return i(e,t),function(){return c(t)}}),[n])}((function(){n.current&&n.current.update()}),[]),function(e,t){var n=h((function(e){return e.windows})),i=h((function(e){return e.addInitSubscriber})),c=h((function(e){return e.removeInitSubscriber}));Object(r.useEffect)((function(){return i(e,t),function(){return c(t)}}),[n])}((function(e){var t=e.camera,r=e.element,i=e.scene,c=t;c.position.set(2,2,2),c.lookAt(0,0,0),n.current=new y.a(c,r);var s=(new f.Box3).setFromObject(i),a=new f.Vector3;s.getSize(a);var o=a.y/(2*Math.tan(c.fov*Math.PI/360)),u=i.position;c.position.setScalar(o).multiplyScalar(1.5),c.lookAt(u)}),[]),Object(j.jsx)(j.Fragment,{children:t.map((function(e,t){return Object(j.jsxs)(p,{uuid:"".concat(t),children:[Object(j.jsx)("group",{scale:.1,"rotation-x":f.MathUtils.degToRad(90),children:Object(j.jsx)(E.a,{children:Object(j.jsx)("mesh",{castShadow:!0,geometry:e.geometry,children:Object(j.jsx)("meshBasicMaterial",{vertexColors:!0})})})}),Object(j.jsx)("ambientLight",{intensity:.2}),Object(j.jsx)("directionalLight",{castShadow:!0,receiveShadow:!0,position:[0,10,0],intensity:.5,"shadow-mapSize-height":512,"shadow-mapSize-width":512}),Object(j.jsx)(k.a,{receiveShadow:!0,"rotation-x":f.MathUtils.degToRad(-90),scale:20,children:Object(j.jsx)("shadowMaterial",{color:"#fef5ed"})}),Object(j.jsx)(M,{})]},t)}))})}I.a.preload("/models/mesh.glb");var z=n(188),C=n(85);n(160);var H=n(83),N=n(84),W=n(191),B=n(189);Object(z.a)();var T={hidden:{scale:0,transition:{staggerChildren:10}},show:{scale:1,transition:{staggerChildren:10}}},U={hidden:{scale:0},show:{scale:1}};function A(e){var t=function(e){var t=e.limit,n=Object(I.a)("/models/mesh.glb").nodes;return Object(r.useMemo)((function(){return Object.values(n).filter((function(e){return e.isMesh})).splice(0,t)}),[t,n])}({limit:e.limit});return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(m,{gl:{antialias:!0},shadows:!0,children:Object(j.jsx)(r.Suspense,{fallback:null,children:Object(j.jsx)(R,{meshes:t})})}),Object(j.jsx)(W.a,{children:Object(j.jsx)(B.a.div,{className:"container",variants:T,initial:"hidden",animate:"show",exit:"hidden",children:t.map((function(e,t){var n;return Object(j.jsx)(B.a.div,{variants:U,children:Object(j.jsx)(g,{className:"cell",uuid:"".concat(t),children:Object(j.jsx)("div",{className:"ScissorWindow-container",children:Object(j.jsx)("p",{children:(null===e||void 0===e||null===(n=e.parent)||void 0===n?void 0:n.name)||"Model ".concat(t+1)})})})},t)}))})})]})}var F=function(){var e=Object(r.useState)(1),t=Object(a.a)(e,2),n=t[0],i=t[1],c=Object(r.useState)(1),s=Object(a.a)(c,2),o=s[0],u=s[1];return Object(j.jsxs)(N.Scrollbars,{autoHide:!0,autoHideTimeout:1e3,autoHideDuration:200,children:[Object(j.jsxs)("p",{className:"title-container",children:["react-three-",Object(j.jsx)("div",{className:"title",children:"Scissor"})]}),Object(j.jsx)("div",{className:"github-btn ",children:Object(j.jsx)(H.a,{href:"https://github.com/farazzshaikh/react-three-scissor","data-color-scheme":"no-preference: light; light: light; dark: dark;","data-size":"large","aria-label":"Star farazzshaikh/react-three-scissor on GitHub",children:"Star"})}),Object(j.jsx)("div",{className:"input",children:Object(j.jsxs)("span",{children:[Object(j.jsx)(C.a,{min:1,max:100,onAfterChange:function(e){return u(e)},onChange:function(e){return i(e)}}),Object(j.jsxs)("div",{children:[n," mesh",n>1?"s":""]})]})}),Object(j.jsx)("h3",{children:"Click + drag on each animal!"}),Object(j.jsx)(r.Suspense,{fallback:null,children:Object(j.jsx)(A,{limit:o})})]})};s.a.render(Object(j.jsx)(i.a.StrictMode,{children:Object(j.jsx)(F,{})}),document.getElementById("root"))},89:function(e,t,n){}},[[181,1,2]]]);
//# sourceMappingURL=main.64d4124b.chunk.js.map